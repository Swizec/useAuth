{"version":3,"file":"index.umd.js","sources":["../src/authReducer.js","../src/AuthProvider.js"],"sourcesContent":["export const authReducer = (state, action) => {\n    switch (action.type) {\n        case \"login\":\n            const {\n                authResult, user\n            } = action;\n            const expiresAt =\n                authResult.expiresIn * 1000 + new Date().getTime();\n\n            if (typeof localStorage !== \"undefined\") {\n                localStorage.setItem(\"access_token\", authResult.accessToken);\n                localStorage.setItem(\"id_token\", authResult.idToken);\n                localStorage.setItem(\"expires_at\", JSON.stringify(expiresAt));\n                localStorage.setItem(\"user\", JSON.stringify(user));\n            }\n\n            return {\n                user,\n                expiresAt\n            };\n        case \"logout\":\n            if (typeof localStorage !== \"undefined\") {\n                localStorage.removeItem(\"access_token\");\n                localStorage.removeItem(\"id_token\");\n                localStorage.removeItem(\"expires_at\");\n                localStorage.removeItem(\"user\");\n            }\n\n            return {\n                user: {},\n                    expiresAt: null\n            };\n        default:\n            return state;\n    }\n};","import React, { createContext, useReducer } from \"react\";\nimport Auth0 from \"auth0-js\";\n\nimport { authReducer } from \"./authReducer\";\n\nconst AUTH0_DOMAIN = \"sparkjoy.auth0.com\";\nconst AUTH0_CLIENT_ID = \"GGfO12E5R8iHPBPh87bym5b3gzmdaYY9\";\nconst CALLBACK_DOMAIN =\n    typeof window !== \"undefined\"\n        ? `${window.location.protocol}//${window.location.host}`\n        : \"https://spark-joy.netlify.com/\";\n\nexport const AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children, navigate }) => {\n    const auth0 = new Auth0.WebAuth({\n        domain: AUTH0_DOMAIN,\n        clientID: AUTH0_CLIENT_ID,\n        redirectUri: `${CALLBACK_DOMAIN}/auth0_callback`,\n        audience: `https://${AUTH0_DOMAIN}/api/v2/`,\n        responseType: \"token id_token\",\n        scope: \"openidw profile email\"\n    });\n\n    // Uncomment this code brings back the 2 Reacts error\n    const [state, dispatch] = useReducer(authReducer, {\n        user:\n            typeof localStorage !== \"undefined\"\n                ? JSON.parse(localStorage.getItem(\"user\"))\n                : {},\n        expiresAt:\n            typeof localStorage !== \"undefined\"\n                ? JSON.parse(localStorage.getItem(\"expires_at\"))\n                : null\n    });\n\n    return (\n        <AuthContext.Provider\n            value={{\n                state,\n                dispatch,\n                auth0,\n                navigate\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":["const","authReducer","state","action","type","expiresAt","authResult","expiresIn","Date","getTime","localStorage","setItem","accessToken","idToken","JSON","stringify","user","removeItem","CALLBACK_DOMAIN","window","location","AuthContext","createContext","ref","auth0","Auth0","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","useReducer","parse","getItem","React","Provider","value","navigate","children"],"mappings":"2UAAOA,IAAMC,WAAeC,EAAOC,UACvBA,EAAOC,UACN,oCAIKC,EACqB,IAAvBC,EAAWC,WAAmB,IAAIC,MAAOC,gBAEjB,oBAAjBC,eACPA,aAAaC,QAAQ,eAAgBL,EAAWM,aAChDF,aAAaC,QAAQ,WAAYL,EAAWO,SAC5CH,aAAaC,QAAQ,aAAcG,KAAKC,UAAUV,IAClDK,aAAaC,QAAQ,OAAQG,KAAKC,UAAUC,KAGzC,MACHA,YACAX,OAEH,eAC2B,oBAAjBK,eACPA,aAAaO,WAAW,gBACxBP,aAAaO,WAAW,YACxBP,aAAaO,WAAW,cACxBP,aAAaO,WAAW,SAGrB,CACHD,KAAM,GACFX,UAAW,qBAGZH,IC1BbgB,EACgB,oBAAXC,OACEA,OAAOC,uBAAsBD,OAAOC,SAAc,KACrD,iCAEGC,EAAcC,gBAAc,8BAEZC,iCACnBC,EAAQ,IAAIC,EAAMC,QAAQ,CAC5BC,OAXa,qBAYbC,SAXgB,mCAYhBC,YAAgBX,oBAChBY,8CACAC,aAAc,iBACdC,MAAO,4BAIeC,aAAWhC,EAAa,CAC9Ce,KAC4B,oBAAjBN,aACDI,KAAKoB,MAAMxB,aAAayB,QAAQ,SAChC,GACV9B,UAC4B,oBAAjBK,aACDI,KAAKoB,MAAMxB,aAAayB,QAAQ,eAChC,cAIVC,gBAACf,EAAYgB,UACTC,MAAO,gCAGHd,WACAe,IAGHC"}